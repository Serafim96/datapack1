
# Find Empty Cameras
execute unless entity @s[tag=!player_stays_in_join_world,tag=village_prison] if data storage minecraft:village_artem {PrisonCamera1Empty:1} run tag @s add village_prison_1
execute if entity @s[tag=!player_stays_in_join_world,tag=village_prison_1] run tag @s add village_prison
execute if entity @s[tag=!player_stays_in_join_world,tag=village_prison_1] run data modify storage minecraft:village_artem PrisonCamera1Empty set value 0
execute unless entity @s[tag=!player_stays_in_join_world,tag=village_prison] if data storage minecraft:village_artem {PrisonCamera1Empty:0} if data storage minecraft:village_artem {PrisonCamera2Empty:1} run tag @s add village_prison_2
execute if entity @s[tag=!player_stays_in_join_world,tag=village_prison_2] run tag @s add village_prison
execute if entity @s[tag=!player_stays_in_join_world,tag=village_prison_2] run data modify storage minecraft:village_artem PrisonCamera2Empty set value 0
execute unless entity @s[tag=!player_stays_in_join_world,tag=village_prison] if data storage minecraft:village_artem {PrisonCamera1Empty:0} if data storage minecraft:village_artem {PrisonCamera2Empty:0} if data storage minecraft:village_artem {PrisonCamera3Empty:1} run tag @s add village_prison_3
execute if entity @s[tag=!player_stays_in_join_world,tag=village_prison_3] run tag @s add village_prison
execute if entity @s[tag=!player_stays_in_join_world,tag=village_prison_3] run data modify storage minecraft:village_artem PrisonCamera3Empty set value 0
execute unless entity @s[tag=!player_stays_in_join_world,tag=village_prison] if data storage minecraft:village_artem {PrisonCamera1Empty:0} if data storage minecraft:village_artem {PrisonCamera2Empty:0} if data storage minecraft:village_artem {PrisonCamera3Empty:0} if data storage minecraft:village_artem {PrisonCamera4Empty:1} run tag @s add village_prison_4
execute if entity @s[tag=!player_stays_in_join_world,tag=village_prison_4] run tag @s add village_prison
execute if entity @s[tag=!player_stays_in_join_world,tag=village_prison_4] run data modify storage minecraft:village_artem PrisonCamera4Empty set value 0
execute unless entity @s[tag=!player_stays_in_join_world,tag=village_prison] if data storage minecraft:village_artem {PrisonCamera1Empty:0} if data storage minecraft:village_artem {PrisonCamera2Empty:0} if data storage minecraft:village_artem {PrisonCamera3Empty:0} if data storage minecraft:village_artem {PrisonCamera4Empty:0} if data storage minecraft:village_artem {PrisonCamera5Empty:1} run tag @s add village_prison_5
execute if entity @s[tag=!player_stays_in_join_world,tag=village_prison_5] run tag @s add village_prison
execute if entity @s[tag=!player_stays_in_join_world,tag=village_prison_5] run data modify storage minecraft:village_artem PrisonCamera5Empty set value 0
execute unless entity @s[tag=!player_stays_in_join_world,tag=village_prison] if data storage minecraft:village_artem {PrisonCamera1Empty:0} if data storage minecraft:village_artem {PrisonCamera2Empty:0} if data storage minecraft:village_artem {PrisonCamera3Empty:0} if data storage minecraft:village_artem {PrisonCamera4Empty:0} if data storage minecraft:village_artem {PrisonCamera5Empty:0} if data storage minecraft:village_artem {PrisonCamera6Empty:1} run tag @s add village_prison_6
execute if entity @s[tag=!player_stays_in_join_world,tag=village_prison_6] run tag @s add village_prison
execute if entity @s[tag=!player_stays_in_join_world,tag=village_prison_6] run data modify storage minecraft:village_artem PrisonCamera6Empty set value 0
execute unless entity @s[tag=!player_stays_in_join_world,tag=village_prison] if data storage minecraft:village_artem {PrisonCamera1Empty:0} if data storage minecraft:village_artem {PrisonCamera2Empty:0} if data storage minecraft:village_artem {PrisonCamera3Empty:0} if data storage minecraft:village_artem {PrisonCamera4Empty:0} if data storage minecraft:village_artem {PrisonCamera5Empty:0} if data storage minecraft:village_artem {PrisonCamera6Empty:0} if data storage minecraft:village_artem {PrisonCamera7Empty:1} run tag @s add village_prison_7
execute if entity @s[tag=!player_stays_in_join_world,tag=village_prison_7] run tag @s add village_prison
execute if entity @s[tag=!player_stays_in_join_world,tag=village_prison_7] run data modify storage minecraft:village_artem PrisonCamera7Empty set value 0
execute unless entity @s[tag=!player_stays_in_join_world,tag=village_prison] if data storage minecraft:village_artem {PrisonCamera1Empty:0} if data storage minecraft:village_artem {PrisonCamera2Empty:0} if data storage minecraft:village_artem {PrisonCamera3Empty:0} if data storage minecraft:village_artem {PrisonCamera4Empty:0} if data storage minecraft:village_artem {PrisonCamera5Empty:0} if data storage minecraft:village_artem {PrisonCamera6Empty:0} if data storage minecraft:village_artem {PrisonCamera7Empty:0} if data storage minecraft:village_artem {PrisonCamera8Empty:0} run tag @s add village_prison_8
execute if entity @s[tag=!player_stays_in_join_world,tag=village_prison_8] run tag @s add village_prison
execute if entity @s[tag=!player_stays_in_join_world,tag=village_prison_8] run data modify storage minecraft:village_artem PrisonCamera8Empty set value 0
execute unless entity @s[tag=!player_stays_in_join_world,tag=village_prison] if data storage minecraft:village_artem {PrisonCamera1Empty:0} if data storage minecraft:village_artem {PrisonCamera2Empty:0} if data storage minecraft:village_artem {PrisonCamera3Empty:0} if data storage minecraft:village_artem {PrisonCamera4Empty:0} if data storage minecraft:village_artem {PrisonCamera5Empty:0} if data storage minecraft:village_artem {PrisonCamera6Empty:0} if data storage minecraft:village_artem {PrisonCamera7Empty:0} if data storage minecraft:village_artem {PrisonCamera8Empty:0} if data storage minecraft:village_artem {PrisonCamera9Empty:1} run tag @s add village_prison_9
execute if entity @s[tag=!player_stays_in_join_world,tag=village_prison_9] run tag @s add village_prison
execute if entity @s[tag=!player_stays_in_join_world,tag=village_prison_9] run data modify storage minecraft:village_artem PrisonCamera9Empty set value 0
execute unless entity @s[tag=!player_stays_in_join_world,tag=village_prison] if data storage minecraft:village_artem {PrisonCamera1Empty:0} if data storage minecraft:village_artem {PrisonCamera2Empty:0} if data storage minecraft:village_artem {PrisonCamera3Empty:0} if data storage minecraft:village_artem {PrisonCamera4Empty:0} if data storage minecraft:village_artem {PrisonCamera5Empty:0} if data storage minecraft:village_artem {PrisonCamera6Empty:0} if data storage minecraft:village_artem {PrisonCamera7Empty:0} if data storage minecraft:village_artem {PrisonCamera8Empty:0} if data storage minecraft:village_artem {PrisonCamera9Empty:0} if data storage minecraft:village_artem {PrisonCamera10Empty:1} run tag @s add village_prison_10
execute if entity @s[tag=!player_stays_in_join_world,tag=village_prison_10] run tag @s add village_prison
execute if entity @s[tag=!player_stays_in_join_world,tag=village_prison_10] run data modify storage minecraft:village_artem PrisonCamera10Empty set value 0
execute unless entity @s[tag=!player_stays_in_join_world,tag=village_prison] if data storage minecraft:village_artem {PrisonCamera1Empty:0} if data storage minecraft:village_artem {PrisonCamera2Empty:0} if data storage minecraft:village_artem {PrisonCamera3Empty:0} if data storage minecraft:village_artem {PrisonCamera4Empty:0} if data storage minecraft:village_artem {PrisonCamera5Empty:0} if data storage minecraft:village_artem {PrisonCamera6Empty:0} if data storage minecraft:village_artem {PrisonCamera7Empty:0} if data storage minecraft:village_artem {PrisonCamera8Empty:0} if data storage minecraft:village_artem {PrisonCamera9Empty:0} if data storage minecraft:village_artem {PrisonCamera10Empty:0} if data storage minecraft:village_artem {PrisonCamera11Empty:1} run tag @s add village_prison_11
execute if entity @s[tag=!player_stays_in_join_world,tag=village_prison_11] run tag @s add village_prison
execute if entity @s[tag=!player_stays_in_join_world,tag=village_prison_11] run data modify storage minecraft:village_artem PrisonCamera11Empty set value 0
execute unless entity @s[tag=!player_stays_in_join_world,tag=village_prison] if data storage minecraft:village_artem {PrisonCamera1Empty:0} if data storage minecraft:village_artem {PrisonCamera2Empty:0} if data storage minecraft:village_artem {PrisonCamera3Empty:0} if data storage minecraft:village_artem {PrisonCamera4Empty:0} if data storage minecraft:village_artem {PrisonCamera5Empty:0} if data storage minecraft:village_artem {PrisonCamera6Empty:0} if data storage minecraft:village_artem {PrisonCamera7Empty:0} if data storage minecraft:village_artem {PrisonCamera8Empty:0} if data storage minecraft:village_artem {PrisonCamera9Empty:0} if data storage minecraft:village_artem {PrisonCamera10Empty:0} if data storage minecraft:village_artem {PrisonCamera11Empty:0} if data storage minecraft:village_artem {PrisonCamera12Empty:1} run tag @s add village_prison_12
execute if entity @s[tag=!player_stays_in_join_world,tag=village_prison_12] run tag @s add village_prison
execute if entity @s[tag=!player_stays_in_join_world,tag=village_prison_12] run data modify storage minecraft:village_artem PrisonCamera12Empty set value 0

execute unless entity @s[tag=!player_stays_in_join_world,tag=village_prison] as @p[nbt={Inventory:[{id:"minecraft:clock",count:1,components:{"minecraft_custom_data":{Tags:["village_police_stick"]}},Slot:-106b}]}] if data storage minecraft:village_artem {PrisonCamera1Empty:0} if data storage minecraft:village_artem {PrisonCamera2Empty:0} if data storage minecraft:village_artem {PrisonCamera3Empty:0} if data storage minecraft:village_artem {PrisonCamera4Empty:0} if data storage minecraft:village_artem {PrisonCamera5Empty:0} if data storage minecraft:village_artem {PrisonCamera6Empty:0} if data storage minecraft:village_artem {PrisonCamera7Empty:0} if data storage minecraft:village_artem {PrisonCamera8Empty:0} if data storage minecraft:village_artem {PrisonCamera9Empty:0} if data storage minecraft:village_artem {PrisonCamera10Empty:0} if data storage minecraft:village_artem {PrisonCamera11Empty:0} if data storage minecraft:village_artem {PrisonCamera12Empty:0} run function village_artem:prison/title/not_enough_places

# Убрать баффы
execute as @p run function village_artem:tags/fire_trail/off
execute as @p run function village_artem:tags/micro_speed/off
execute as @p run function village_artem:tags/slow_falling/off
execute as @p run function village_artem:tags/fire_resistance/off
execute as @p run function village_artem:tags/resistance/off
execute as @p run function village_artem:tags/water_breating/off
execute as @p run function village_artem:tags/jump_boost/off
execute as @p run function village_artem:tags/fire_trail/off


execute if entity @s[tag=!player_stays_in_join_world,tag=village_prison] run advancement grant @s only village_artem:prison/prisoner
execute if entity @s[tag=!player_stays_in_join_world,tag=village_prison] run advancement revoke @s only village_artem:prison/pardoned
execute if entity @s[tag=!player_stays_in_join_world,tag=village_prison] run function village_artem:prison/title/prisoned
execute unless entity @s[tag=!player_stays_in_join_world,tag=village_prison] run function village_artem:prison/title/lucky